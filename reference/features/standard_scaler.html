

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>StandardScaler Base &mdash; SpiegeLib 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Estimator Classes" href="../estimators.html" />
    <link rel="prev" title="DataScalerBase Class" href="data_scaler_base.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SpiegeLib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../synth.html">Synthesizers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../features.html">Audio Feature Extraction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features_base.html">     FeaturesBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="fft.html">Fast Fourier Transform (FFT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="stft.html">Short Time Fourier Transform (STFT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mfcc.html">     Mel-Frequency Cepstral Coefficients (MFCC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectral_summarized.html">Time Summarized Spectral Features (SpectralSummarized)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../features.html#data-scaling">Data Scaling</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="data_scaler_base.html">DataScalerBase</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">StandardScaler</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../estimators.html">Estimators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network.html">Network</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples_index.html">Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contribution Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SpiegeLib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../features.html">Audio Feature Extraction</a> &raquo;</li>
        
      <li>StandardScaler Base</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/features/standard_scaler.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-spiegelib.features.standard_scaler">
<span id="standardscaler-base"></span><span id="standard-scaler"></span><h1>StandardScaler Base<a class="headerlink" href="#module-spiegelib.features.standard_scaler" title="Permalink to this headline">¶</a></h1>
<p>Data scaler class that implments standarization. This transforms data
to have a mean of zero and variance of 1.</p>
<p>Scaler must be ‘trained’ (fit) before it can be used to scale new results.</p>
<p class="rubric">Examples</p>
<ol class="arabic">
<li><p>Feature extraction objects by default load with a StandardScaler and
are designed to work with the DatasetGenetor</p>
<blockquote>
<div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spiegelib</span> <span class="k">as</span> <span class="nn">spgl</span>

<span class="n">synth</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">synth</span><span class="o">.</span><span class="n">SynthVST</span><span class="p">(</span><span class="s2">&quot;/Library/Audio/Plug-Ins/VST/Dexed.vst&quot;</span><span class="p">)</span>
<span class="n">spectral_features</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">SpectralSummarized</span><span class="p">()</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">DatasetGenerator</span><span class="p">(</span><span class="n">synth</span><span class="p">,</span> <span class="n">spectral_features</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">generator</span><span class="o">.</span><span class="n">save_scaler</span><span class="p">(</span><span class="s1">&#39;./data_scaler.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The scaler is saved in the spectral_features object and is used to scale
future data. The scaler is also saved and can be reloaeded for future
feature extraction. See <a class="reference internal" href="features_base.html#spiegelib.features.FeaturesBase.load_scaler" title="spiegelib.features.FeaturesBase.load_scaler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_scaler()</span></code></a></p>
</div></blockquote>
</li>
<li><p>Using StandardScaler independently</p>
<blockquote>
<div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spiegelib</span> <span class="k">as</span> <span class="nn">spgl</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Generate a dataset without scaling</span>
<span class="n">synth</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">synth</span><span class="o">.</span><span class="n">SynthVST</span><span class="p">(</span><span class="s2">&quot;/Library/Audio/Plug-Ins/VST/Dexed.vst&quot;</span><span class="p">,</span>
                            <span class="n">render_length_secs</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

<span class="n">mfcc</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">MFCC</span><span class="p">(</span><span class="n">num_mfccs</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">DatasetGenerator</span><span class="p">(</span><span class="n">synth</span><span class="p">,</span> <span class="n">mfcc</span><span class="p">)</span>
<span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">file_prefix</span><span class="o">=</span><span class="s2">&quot;train_&quot;</span><span class="p">)</span>


<span class="c1"># DatasetGenerator will automatically save the extracted features as a npy</span>
<span class="c1"># file in the current working directory</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;./train_features.npy&#39;</span><span class="p">)</span>

<span class="n">scaler</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="n">scaled_data</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>


<span class="c1"># Now we can add the scaler to the MFCC feature extractor and use it to</span>
<span class="c1"># scale any future feature extractions</span>
<span class="n">mfcc</span><span class="o">.</span><span class="n">set_scaler</span><span class="p">(</span><span class="n">scaler</span><span class="p">)</span>
<span class="n">random_audio</span> <span class="o">=</span> <span class="n">synth</span><span class="o">.</span><span class="n">get_random_example</span><span class="p">()</span>
<span class="n">scaled_mfccs</span> <span class="o">=</span> <span class="n">mfcc</span><span class="p">(</span><span class="n">random_audio</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Scaling along certain dimensions</p>
<blockquote>
<div><p>The dimension that scaling is applied to depends on the fit axis. Our MFCC dataset
generated in the previous example has the shape (1000, 13, 88) where each axis
corresponds to (batches, mfccs, time slices).</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Same dataset as before and new scaler object</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;./train_features.npy&#39;</span><span class="p">)</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">spgl</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">StandardScaler</span><span class="p">()</span>

<span class="c1"># This flattens the entire dataset and calculates</span>
<span class="c1"># the mean and variance on the flattened array</span>
<span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1"># Since the batch is on the first axis, this will calculate</span>
<span class="c1"># the mean and variance independently for each MFCC and time slice</span>
<span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># This will scale each MFCC band independently</span>
<span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>To control the scale axis when using the DatasetGenerator from the first
example, a custom axis can be set for a feature extraction object in the
constructor. See the scale_axis argument in
the <a class="reference internal" href="features_base.html#spiegelib.features.FeaturesBase" title="spiegelib.features.FeaturesBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeaturesBase</span></code></a> constructor.</p>
</div></blockquote>
</li>
</ol>
<dl class="class">
<dt id="spiegelib.features.StandardScaler">
<em class="property">class </em><code class="sig-prename descclassname">spiegelib.features.</code><code class="sig-name descname">StandardScaler</code><a class="headerlink" href="#spiegelib.features.StandardScaler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">spiegelib.features.data_scaler_base.DataScalerBase</span></code></p>
<dl class="method">
<dt id="spiegelib.features.StandardScaler.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">axis=None</em><span class="sig-paren">)</span><a class="headerlink" href="#spiegelib.features.StandardScaler.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute mean and std for later scaling</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – data to calculate mean and standard deviation on
for future scaling</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>tuple</em><em>, </em><em>optional</em>) – axis or axes to use for calculating scaling
parameteres. Defaults to None which will flatten the array first.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="spiegelib.features.StandardScaler.transform">
<code class="sig-name descname">transform</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#spiegelib.features.StandardScaler.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>np.ndarray</em>) – data to scale</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>scaled data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../estimators.html" class="btn btn-neutral float-right" title="Estimator Classes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="data_scaler_base.html" class="btn btn-neutral float-left" title="DataScalerBase Class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, University of Victoria

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>